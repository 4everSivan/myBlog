webpackJsonp([0],{Q6dk:function(t,e,n){"use strict";var i=n("ada0"),a={props:{loading:Boolean,noData:Boolean,offset:Number},name:"index",mounted:function(){window.addEventListener("scroll",this.handleScroll,!1)},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)},data:function(){return{scrollAction:{x:"undefined",y:"undefined"}}},methods:{handleScroll:function(t){if(!this.noData){var e=document.documentElement.scrollTop||document.body.scrollTop;document.getElementById("scroll-page");e+window.innerHeight>=this.$refs.scroll.offsetHeight+this.offset&&this.isDownDirection()&&(this.loading||this.$emit("load"))}},isDownDirection:function(){void 0===this.scrollAction.x&&(this.scrollAction.x=window.pageXOffset,this.scrollAction.y=window.pageYOffset);var t=this.scrollAction.x-window.pageXOffset,e=this.scrollAction.y-window.pageYOffset;if(this.scrollAction.x=window.pageXOffset,this.scrollAction.y=window.pageYOffset,t<0);else if(t>0);else if(e<0)return!0;return!1}}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"scroll",staticStyle:{overflow:"hidden"},attrs:{id:"scroll-page"}},[this._t("default"),this._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],staticStyle:{height:"40px","margin-top":"10px","z-index":"1"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(245,245,245)"}})],2)},staticRenderFns:[]};var r=n("VU/8")(a,o,!1,function(t){n("r5+L")},"data-v-eb76b7da",null).exports,s=n("viA7"),c={name:"ArticleScrollPage",props:{offset:{type:Number,default:100},page:{type:Object,default:function(){return{}}},query:{type:Object,default:function(){return{}}}},watch:{query:{handler:function(){this.noData=!1,this.articles=[],this.innerPage.pageNumber=1,this.getArticles()},deep:!0},page:{handler:function(){this.noData=!1,this.articles=[],this.innerPage=this.page,this.getArticles()},deep:!0}},created:function(){this.getArticles()},data:function(){return{loading:!1,noData:!1,innerPage:{pageSize:5,pageNumber:1,name:"a.createDate",sort:"desc"},articles:[]}},methods:{load:function(){this.getArticles()},view:function(t){this.$router.push({path:"/view/"+t})},getArticles:function(){var t=this;t.loading=!0,Object(s.c)(t.query,t.innerPage).then(function(e){var n=e.data;n&&n.length>0?(t.innerPage.pageNumber+=1,t.articles=t.articles.concat(n)):t.noData=!0}).catch(function(e){"error"!==e&&t.$message({type:"error",message:"文章加载失败!",showClose:!0})}).finally(function(){t.loading=!1})}},components:{"article-item":i.a,"scroll-page":r}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("scroll-page",{attrs:{loading:t.loading,offset:t.offset,"no-data":t.noData},on:{load:t.load}},t._l(t.articles,function(e){return n("article-item",t._b({key:e.id},"article-item",e,!1))}),1)},staticRenderFns:[]};var d=n("VU/8")(c,l,!1,function(t){n("YZE2")},"data-v-2946d9a3",null);e.a=d.exports},YZE2:function(t,e){},iNxE:function(t,e,n){"use strict";e.a=function(){return Object(i.a)({url:"/tags",method:"get"})},e.b=function(){return Object(i.a)({url:"/tags/detail",method:"get"})},e.c=function(){return Object(i.a)({url:"/tags/hot",method:"get"})},e.d=function(t){return Object(i.a)({url:"/tags/detail/"+t,method:"get"})};var i=n("OOvn")},"r5+L":function(t,e){},s8Ph:function(t,e,n){"use strict";e.a=function(){return Object(i.a)({url:"/categorys",method:"get"})},e.b=function(){return Object(i.a)({url:"/categorys/detail",method:"get"})},e.c=function(t){return Object(i.a)({url:"/categorys/detail/"+t,method:"get"})};var i=n("OOvn")},uzBN:function(t,e,n){"use strict";e.a=function(t){return Object(i.a)({headers:{"Content-Type":"multipart/form-data"},url:"/upload",method:"post",data:t})};var i=n("OOvn")}});
//# sourceMappingURL=0.f615968389fdf3d9975a.js.map